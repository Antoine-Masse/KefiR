% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sys_detect_model_type.R
\name{.detect_model_type}
\alias{.detect_model_type}
\title{Detection du type de modele (ANOVA vs. ANCOVA) - VERSION 3}
\usage{
.detect_model_type(formula, data, debug = FALSE)
}
\arguments{
\item{formula}{Une \code{\link[stats]{formula}}. Par exemple \code{y ~ x1 + x2 + ...}.}

\item{data}{Un \code{data.frame} contenant les variables mentionnees dans \code{formula}.}

\item{debug}{Logique. Si \code{TRUE}, affiche des messages de debogage detailles (defaut: \code{FALSE}).}
}
\value{
Un booleen logique :
\itemize{
\item \code{TRUE} si le modele identifie est de type ANCOVA ;
\item \code{FALSE} si le modele identifie est de type ANOVA ;
\item Arret de la fonction avec un message d'erreur si aucun facteur categoriel
ou covariable continue n'est detecte.
}
}
\description{
Cette fonction \code{.detect_model_type} determine automatiquement, a partir d'une formule
R et d'un jeu de donnees, s'il s'agit d'un scenario d'ANOVA (uniquement des predicteurs
categoriques) ou d'ANCOVA (combinaison de predicteurs categoriques et numeriques).
}
\details{
Concretement, la fonction detecte et convertit au besoin les variables binaires (0/1)
en facteurs, puis separe les predicteurs en deux categories (\emph{factorielles} et
\emph{numeriques}). Sur cette base, elle renvoie :
\itemize{
\item \code{TRUE} si le modele correspond a une ANCOVA (facteurs + covariables continues) ;
\item \code{FALSE} si le modele correspond a une ANOVA (exclusivement des facteurs) ;
\item \code{exit(...)} (arret) si aucun facteur categoriel ou aucune covariable
continue n'est detectee.
}

Les variables binaires (\code{0/1}) presentes dans \code{data} sont automatiquement
converties en facteurs avant l'identification du type de modele. Si vous utilisez
un parametre \code{debug} ou des fonctions internes (\code{.msg}, \code{.exit}, \code{.dbg}),
assurez-vous qu'ils soient definis dans l'environnement de travail.

\strong{VERSION 3 (CHANGEMENT MAJEUR):} Cette fonction retourne maintenant un booleen
(\code{TRUE} ou \code{FALSE}) au lieu d'une chaine de caracteres (\code{"TRUE"} ou \code{"FALSE"}).
Ceci ameliore la coherence du code et evite les comparaisons de chaines.
}
\examples{
\dontrun{
# Exemple de donnees
df <- data.frame(
  y = rnorm(100),
  groupe = factor(rep(LETTERS[1:2], 50)),
  x = runif(100),
  binaire = rbinom(100, 1, 0.5)
)

# Cas 1 : formule avec un facteur et une covariable continue => TRUE (ANCOVA)
.detect_model_type(y ~ groupe + x, data = df)

# Cas 2 : uniquement un facteur => FALSE (ANOVA)
.detect_model_type(y ~ groupe, data = df)

# Cas 3 : uniquement une variable binaire (convertie en facteur) mais pas de covariable
# => Ici, la fonction renvoie FALSE (ANOVA) si la variable binaire est consideree comme un facteur

# Cas 4 : si aucune variable factorielle ni numerique n'est trouvee => arret
}

}
\seealso{
\itemize{
\item \code{\link{terms}} pour l'extraction des predicteurs d'une formule,
\item \code{\link{aov}} et \code{\link{lm}} pour l'ajustement des modeles ANOVA ou ANCOVA.
}
}
\keyword{internal}

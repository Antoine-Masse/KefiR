% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cor.e.R
\name{cor.e}
\alias{cor.e}
\title{Generate a new variable correlated with the first column of a dataframe}
\usage{
cor.e(
  dataframe,
  cor.f,
  meani = 0,
  sdi = 1,
  strict = FALSE,
  strict_corr = FALSE
)
}
\arguments{
\item{dataframe}{A data frame containing at least one numeric column.}

\item{cor.f}{Numeric, between -1 and 1. Desired correlation coefficient with the first column.}

\item{meani}{Optional. Desired mean for the new variable. Default is 0.}

\item{sdi}{Optional. Desired standard deviation for the new variable. Default is 1.}

\item{strict}{Logical. If \code{TRUE}, enforces exactly the specified mean and sd;
if \code{FALSE}, allows natural fluctuations. Default is \code{FALSE}.}

\item{strict_corr}{Logical. If \code{TRUE}, enforces exactly the desired correlation;
if \code{FALSE}, allows minor fluctuations. Default is \code{FALSE}.}
}
\value{
A numeric vector of the same length as the number of rows in the dataframe,
representing the generated correlated variable.
}
\description{
Creates a new numeric variable correlated with the first column of a given dataframe.
The user can specify the desired correlation coefficient, mean, and standard deviation
of the new variable, as well as options to enforce exact or approximate correlation and statistics.
}
\details{
Steps:
\enumerate{
\item Converts the input to a matrix.
\item Generates a normal random variable \code{z} with mean \code{meani} and sd \code{sdi}.
\item Centers and standardizes the first column.
\item If \code{strict_corr = TRUE}, orthogonalizes \code{z} relative to the first column for exact correlation.
\item Combines both standardized vectors using \code{cor.f} and \code{sqrt(1 - cor.f^2)}.
\item If \code{strict = TRUE}, rescales to exactly match \code{meani} and \code{sdi}.
}
}
\examples{
df <- data.frame(x = rnorm(100))
y <- cor.e(df, cor.f = 0.5, meani = 10, sdi = 2)
cor(df$x, y)
mean(y); sd(y)

}

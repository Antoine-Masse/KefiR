% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sys_normality.R
\name{.normality}
\alias{.normality}
\title{Test de normalite adaptatif avec strategies multiples}
\usage{
.normality(
  x,
  g = NULL,
  alpha = 0.05,
  tolerance = "basic",
  paired = FALSE,
  debug = FALSE,
  verbose = FALSE,
  k = 0,
  cpt = "on",
  code = NULL
)
}
\arguments{
\item{x}{Vecteur numerique. Variable dont la normalite doit etre testee.}

\item{g}{Vecteur ou facteur de regroupement. Si \code{NULL}, toutes les donnees
sont traitees comme un seul groupe (defaut : \code{NULL}).}

\item{alpha}{Numerique. Seuil de signification pour evaluer la normalite
(defaut : \code{0.05}).}

\item{tolerance}{Chaine de caracteres. Niveau de tolerance pour les criteres
de Skewness/Kurtosis :
\itemize{
\item \code{"basic"} : |Skewness| <= 1 et |Kurtosis| <= 1.5 (Kline, 2011)
\item \code{"extrem"} : |Skewness| <= 2 et |Kurtosis| <= 7 (Blanca et al., 2017)
}
Defaut : \code{"basic"}.}

\item{paired}{Logique. Si \code{TRUE}, teste la normalite des differences
pour donnees appariees (defaut : \code{FALSE}).}

\item{debug}{Logique. Si \code{TRUE}, affiche des messages de debogage
(defaut : \code{FALSE}).}

\item{verbose}{Logique. Si \code{TRUE}, affiche des messages detailles
(defaut : \code{FALSE}).}

\item{k}{Entier. Compteur de messages (defaut : \code{0}).}

\item{cpt}{Chaine de caracteres. Mode de comptage des messages
(defaut : \code{"on"}).}

\item{code}{Chaine de caracteres. Code de la langue pour les messages
(\code{NULL} pour detection automatique).}
}
\value{
Une liste contenant :
\itemize{
\item \code{check_normality} : Logique. \code{TRUE} si les donnees sont
considerees normales, \code{FALSE} sinon.
\item \code{k} : Entier. Compteur de messages mis a jour.
}
}
\description{
Evalue la normalite d'une variable numerique avec selection automatique du test
approprie selon la taille des echantillons et l'heterogeneite des groupes.
}
\details{
\strong{Strategie de selection des tests :}
\enumerate{
\item \strong{Groupes homogenes (n <= 50)} : Test de Shapiro-Wilk
\item \strong{Groupes homogenes (50 < n <= 500)} : Test de Jarque-Bera modifie
\item \strong{Grands echantillons (n > 500) ou heterogeneite forte} :
Criteres heuristiques bases sur Skewness et Kurtosis
}

\strong{Gestion de l'heterogeneite :}
Lorsque les tailles de groupes traversent les seuils critiques (50 ou 500),
une strategie uniforme (heuristique) est appliquee pour eviter les biais
lies aux differences de puissance statistique entre tests.

\strong{Correction pour comparaisons multiples :}
\itemize{
\item 2-10 groupes : Correction de Sidak
\item > 10 groupes : Correction FDR (Benjamini-Hochberg)
\item Heuristique : Pas de correction (valeurs non probabilistes)
}
}
\examples{
\dontrun{
# Exemple 1 : Un seul groupe (petite taille)
x1 <- rnorm(30)
.normality(x1)  # Utilise Shapiro-Wilk

# Exemple 2 : Plusieurs groupes homogenes
x2 <- c(rnorm(40, mean = 5), rnorm(40, mean = 6), rnorm(40, mean = 7))
g2 <- factor(rep(c("A", "B", "C"), each = 40))
.normality(x2, g2)  # Utilise Shapiro-Wilk avec correction Sidak

# Exemple 3 : Grand echantillon
x3 <- rnorm(600)
.normality(x3)  # Utilise criteres Skewness/Kurtosis

# Exemple 4 : Groupes heterogenes (force heuristique)
x4 <- c(rnorm(30), rnorm(200))
g4 <- factor(rep(c("Small", "Large"), c(30, 200)))
.normality(x4, g4)  # Strategie uniforme appliquee

# Exemple 5 : Tolerance extreme pour donnees reelles
x5 <- rgamma(100, shape = 2, rate = 1)  # Legerement asymetrique
.normality(x5, tolerance = "extrem")
}

}
\references{
Blanca, M. J., Alarcon, R., Arnau, J., Bono, R., & Bendayan, R. (2017).
Non-normal data: Is ANOVA still a valid option? \emph{Psicothema}, 29(4), 552-557.
\url{https://diposit.ub.edu/dspace/bitstream/2445/122126/1/671797.pdf}

Chaffin, W. W., & Rhiel, S. G. (1993). The effect of skewness and kurtosis
on the one-sample T test and the impact of knowledge of the population
standard deviation. \emph{Journal of Statistical Computation and Simulation},
46(1-2), 79-90.

Glinskiy, V. V., Zhukova, M. A., & Tsybatov, A. E. (2024).
Modifications to the Jarque-Bera Test. \emph{Mathematics}, 12(16), 2523.
\doi{10.3390/math12162523}

Kline, R. B. (2011). \emph{Principles and practice of structural equation
modeling} (4th ed.). Guilford Press.

Korkmaz, S., & Demir, Y. (2023). Investigation of some univariate normality
tests in terms of type-I errors and test power. \emph{Journal of Scientific
Reports-A}, (52), 376-395.
}
\seealso{
\code{\link{shapiro.test}}, \code{\link{jb.norm.test}},
\code{\link[agricolae]{skewness}}, \code{\link[agricolae]{kurtosis}}
}
\keyword{internal}
